(this["webpackJsonptaller-nico"]=this["webpackJsonptaller-nico"]||[]).push([[0],{15:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var s={startLogin:"[auth] start the login auth",finshLogin:"[auth] finsish login auth",finishChecking:"[auth] finish checking",logout:"[auth] start logout",getAllWorks:"[work] get all works",getAllOrders:"[order] get all orders",setOneWork:"[work] set one work",getAllClients:"[client]get all the client form tha db",setOneClient:"[client] set one client",setWorksClient:"[client]set all works client",resetWorksClient:"[client]reset the state if there is no works",filterWorksState:"[works] filter the works bt state",filtrarClient:"[client] filter the clients by dni",updateClientAvatar:"[client] update client avatar"}},244:function(e,t){},246:function(e,t){},276:function(e,t){},277:function(e,t){},494:function(e,t,n){"use strict";n.r(t),n.d(t,"authReducer",(function(){return r}));var s=n(12),c=n(15),a={checking:!0},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.a.startLogin:return Object(s.a)(Object(s.a)(Object(s.a)({},e),t.payload),{},{checking:!1});case c.a.finishChecking:return Object(s.a)(Object(s.a)({},e),{},{checking:!1});case c.a.logout:return{checking:!1};default:return e}}},495:function(e,t,n){},496:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n(2),a=n(75),r=n.n(a),i=n(10),o=n(14),l=n(20),d=n(9),j=n.n(d),u=n(17),b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",s="".concat("https://novatechnology.herokuapp.com/api/").concat(e);return console.log(t),console.log(s),"GET"===n?fetch(s):fetch(s,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",s="".concat("https://novatechnology.herokuapp.com/api/").concat(e);console.log(s);var c=localStorage.getItem("token")||"";return console.log("llega"),"GET"===n?fetch(s,{headers:{"x-token":c}}):(console.log("post"),fetch(s,{method:n,headers:{"Content-type":"application/json","x-token":c},body:JSON.stringify(t)}))},m=n(15),x=n(22),O=n.n(x),p=function(){return function(e){localStorage.removeItem("token"),localStorage.removeItem("token-start-date"),e(g())}},g=function(){return{type:m.a.logout}},v=function(){return{type:m.a.finishChecking}},f=function(e){return{type:m.a.startLogin,payload:e}},w=(n(116),O.a.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",O.a.stopTimer),e.addEventListener("mouseleave",O.a.resumeTimer)}})),N=function(){return function(){var e=Object(u.a)(j.a.mark((function e(t){var n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("clients");case 3:return n=e.sent,e.next=6,n.json();case 6:(s=e.sent).ok&&t(E(s.clients)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},k=function(e,t){return function(){var n=Object(u.a)(j.a.mark((function n(s){var c,a,r,i,o,l;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!t){n.next=22;break}return n.next=4,b("clients/upload",{file:t},"POST");case 4:return c=n.sent,n.next=7,c.json();case 7:if(a=n.sent,console.log(a),!a.ok){n.next=20;break}return e.pathImg=a.url,console.log(e),n.next=14,h("clients",e,"POST");case 14:return r=n.sent,n.next=17,r.json();case 17:i=n.sent,console.log(i),i.ok&&w.fire({icon:"success",title:i.msg});case 20:n.next=30;break;case 22:return n.next=24,h("clients",e,"POST");case 24:return o=n.sent,n.next=27,o.json();case 27:l=n.sent,console.log(l),l.ok?w.fire({icon:"success",title:l.msg}):w.fire({icon:"error",title:l.msg});case 30:n.next=36;break;case 32:n.prev=32,n.t0=n.catch(0),console.log(n.t0),w.fire({icon:"error",title:n.t0});case 36:case"end":return n.stop()}}),n,null,[[0,32]])})));return function(e){return n.apply(this,arguments)}}()},y=function(){return{type:m.a.resetWorksClient}},C=function(e){return{type:m.a.setWorksClient,payload:e}},S=function(e){return{type:m.a.setOneClient,payload:e}},E=function(e){return{type:m.a.getAllClients,payload:e}},D=n(7),I=n(77),_=n(12),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),n=Object(D.a)(t,2),s=n[0],a=n[1],r=function(){a(e)},i=function(e){var t=e.target;a(Object(_.a)(Object(_.a)({},s),{},Object(I.a)({},t.name,t.value)))};return[s,i,r]},T=function(e){e.history;var t=Object(i.b)(),n=L({username:"administrador",password:"admin1"}),c=Object(D.a)(n,2),a=c[0],r=c[1],o=a.username,l=a.password,d=function(){var e=!0;return o.trim().length<5&&(e=!1),l.trim().length<6&&(e=!1),!!e};return Object(s.jsx)("div",{className:"auth__login",children:Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(o,l),d()?t(function(e,t){return function(){var n=Object(u.a)(j.a.mark((function n(s){var c,a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e,t),n.next=3,b("auth/login",{username:e,password:t},"POST");case 3:return c=n.sent,n.next=6,c.json();case 6:a=n.sent,console.log(a),a.ok?(localStorage.setItem("token",a.token),localStorage.setItem("token-start-date",(new Date).getTime()),s(f({uid:a.uid,username:a.username,role:a.role}))):O.a.fire("error",a.msg,"error");case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(o,l)):console.log("verifica los datos")},className:"auth__login-form",children:[Object(s.jsx)("h3",{children:"Inicia sesion"}),Object(s.jsx)("label",{children:"Username"}),Object(s.jsx)("input",{value:o,onChange:r,type:"text",name:"username"}),Object(s.jsx)("label",{children:"password"}),Object(s.jsx)("input",{value:l,onChange:r,type:"password",name:"password"}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{className:"btn",type:"submit",children:"Inicia Sesion"})]})})},M=function(){return Object(s.jsx)("div",{className:"loading",children:Object(s.jsxs)("div",{class:"sk-circle",children:[Object(s.jsx)("div",{class:"sk-circle1 sk-child"}),Object(s.jsx)("div",{class:"sk-circle2 sk-child"}),Object(s.jsx)("div",{class:"sk-circle3 sk-child"}),Object(s.jsx)("div",{class:"sk-circle4 sk-child"}),Object(s.jsx)("div",{class:"sk-circle5 sk-child"}),Object(s.jsx)("div",{class:"sk-circle6 sk-child"}),Object(s.jsx)("div",{class:"sk-circle7 sk-child"}),Object(s.jsx)("div",{class:"sk-circle8 sk-child"}),Object(s.jsx)("div",{class:"sk-circle9 sk-child"}),Object(s.jsx)("div",{class:"sk-circle10 sk-child"}),Object(s.jsx)("div",{class:"sk-circle11 sk-child"}),Object(s.jsx)("div",{class:"sk-circle12 sk-child"})]})})},Y=function(e){var t=e.history,n=Object(i.b)(),a=Object(c.useState)(!0),r=Object(D.a)(a,2),o=r[0],l=r[1],d=Object(c.useState)(!1),h=Object(D.a)(d,2),m=h[0],x=h[1],p=L({username:"",password:""}),g=Object(D.a)(p,3),v=g[0],f=g[1],w=g[2],N=v.username,k=v.password,y=function(){var e=!0;return N.trim().length<5&&(e=!1),k.trim().length<6&&(e=!1),l(e),console.log(e),!!e};return Object(s.jsx)("div",{className:"auth__register",children:Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),x(!0),y()?(n(function(e,t){return function(){var n=Object(u.a)(j.a.mark((function n(s){var c,a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b("auth/createUser",{username:e,password:t,role:"user"},"POST");case 2:return c=n.sent,n.next=5,c.json();case 5:(a=n.sent).ok?O.a.fire({position:"center",icon:"success",title:"Usuario registrado con exito...",showConfirmButton:!1,timer:3e3}):O.a.fire("error",a.msg,"error");case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(N,k)),w(),t.push("/")):console.log("verifica los datos"),x(!1)},className:"register-form",children:[Object(s.jsx)("h3",{children:"Registrar Usuario"}),!o&&Object(s.jsxs)("ul",{className:"error-form",children:[Object(s.jsx)("li",{className:"help-1",children:"Verifica que el usuario y la contrase\xf1a son correctos"}),Object(s.jsx)("br",{}),Object(s.jsx)("li",{className:"help-2",children:"Deben tener como minimo 6 caracteres y el usuario debe ser unico."})]}),Object(s.jsx)("label",{children:"Username"}),Object(s.jsx)("input",{value:N,onChange:f,type:"text",name:"username"}),Object(s.jsx)("label",{children:"password"}),Object(s.jsx)("input",{value:k,onChange:f,type:"password",name:"password"}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{className:"btn",type:"submit",children:m?"Registrando...":"Registrarse"})]})})},P=n(16),A=n.n(P),W=function(e){return e.map((function(e){return Object(_.a)(Object(_.a)({},e),{},{fechaInicio:A()(e.fechaInicio).toDate()})}))},R=function(){return function(){var e=Object(u.a)(j.a.mark((function e(t){var n,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("works");case 3:return n=e.sent,e.next=6,n.json();case 6:s=e.sent,c=W(s.works),console.log(c),s.ok&&t(F(c)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},q=function(e,t){return function(){var n=Object(u.a)(j.a.mark((function n(s){var c,a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h("works/".concat(t),e,"PUT");case 3:return c=n.sent,n.next=6,c.json();case 6:a=n.sent,console.log(a.updateWork),a.ok?(s(z(a.updateWork)),O.a.fire({position:"center",icon:"success",title:"Trabajo editado con exito!!!",showConfirmButton:!1,timer:2500})):O.a.fire("error","Hubo un error en la consula intente de nuevo","error"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),O.a.fire("error",n.t0,"error");case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},F=function(e){return{type:m.a.getAllWorks,payload:e}},z=function(e){return{type:m.a.setOneWork,payload:e}},U=n.p+"static/media/bg.02bee48a.jpg",B=n.p+"static/media/userLogo.4bac9738.png",H=function(e){var t,n,c,a,r,l=e.work,d=A()(A()().format("YYYY-MM-DD")),j=Object(i.c)((function(e){return e.auth})).role,u="";switch(null===l||void 0===l?void 0:l.state[(null===l||void 0===l?void 0:l.state.length)-1].nombre){case"Revision":u="red-700";break;case"Presupuesto":u="gray-600";break;case"En Reparacion":u="yellow-500";break;case"Terminado":u="pink-400";break;default:u="green-700"}return Object(s.jsxs)(o.b,{to:"/works/".concat(l.work._id),className:"work",children:[(null===l||void 0===l?void 0:l.work.images.length)>0?Object(s.jsx)("img",{style:{height:150},className:"rounded-t",src:"/assets/img/works/".concat(null===l||void 0===l||null===(t=l.work.images[0])||void 0===t?void 0:t.fileName)}):Object(s.jsx)("img",{style:{height:150},className:"rounded-t",src:U}),Object(s.jsx)("div",{className:"title p-1",children:Object(s.jsx)("span",{className:"capitalize text-"+u,children:(null===l||void 0===l?void 0:l.work.marca)+"   "+(null===l||void 0===l?void 0:l.work.modelo)})}),Object(s.jsx)("div",{className:"observaciones p-1",children:Object(s.jsxs)("span",{children:[null===l||void 0===l?void 0:l.work.observaciones.slice(0,100)," ",(null===l||void 0===l?void 0:l.work.observaciones.length)>100?"...":null]})}),Object(s.jsxs)("div",{className:"p-1",children:[" ",Object(s.jsx)("p",{className:"text-gray-300",children:"Hace "+d.diff(A()(A()(l.state[l.state.length-1].fecha).format("YYYY-MM-DD")),"days")+" Dias"}),Object(s.jsx)("p",{children:l.work.codigo})]}),Object(s.jsxs)("div",{className:"estado p-1 flex justify-between items-center",children:[Object(s.jsx)("span",{className:"rounded-sm bg-".concat(u," p-1"),children:null===l||void 0===l?void 0:l.state[(null===l||void 0===l?void 0:l.state.length)-1].nombre}),Object(s.jsx)("i",{className:" fas fa-mobile-alt mr-4 text-"+u})]}),Object(s.jsxs)("div",{className:"cliente-precio flex justify-between bg-gray-200 rounded-b p-1 items-center gap-2",children:[(null===l||void 0===l||null===(n=l.work.cliente)||void 0===n?void 0:n.pathImg)?Object(s.jsx)("img",{className:"rounded-full w-8 border-1 border-pink-500 h-8",src:"/assets/img/client/".concat(null===l||void 0===l||null===(c=l.work.cliente)||void 0===c?void 0:c.pathImg)}):Object(s.jsx)("img",{className:"rounded-full w-8 border-1 border-pink-500 h-8",src:B}),Object(s.jsxs)("h3",{className:"capitalize font-serif",children:[null===l||void 0===l||null===(a=l.work.cliente)||void 0===a||null===(r=a.name)||void 0===r?void 0:r.slice(0,13),"..."]}),"admin"==j&&Object(s.jsx)("span",{className:"work-precio text-"+u,children:" $ "+(null===l||void 0===l?void 0:l.work.total.toFixed(2))})]})]})},V=n(502),J=n(497),$=n(498),G=n(499),X=n(500),K=n(503),Q=n(501),Z=(n(125),n(126),n(127),n(128),function(){return Object(s.jsxs)("div",{class:"spinner",children:[Object(s.jsx)("div",{class:"bounce1"}),Object(s.jsx)("div",{class:"bounce2"}),Object(s.jsx)("div",{class:"bounce3"}),Object(s.jsx)("span",{children:"Cargando..."})]})});V.a.use([J.a,$.a,G.a,X.a]);var ee=function(){var e=Object(i.b)(),t=Object(c.useState)([]),n=Object(D.a)(t,2),a=n[0],r=n[1],l=Object(c.useState)(!0),d=Object(D.a)(l,2),j=d[0],u=d[1];Object(c.useEffect)((function(){e(N())}),[e]),Object(c.useEffect)((function(){e(R())}),[e]),Object(c.useEffect)((function(){fetch("".concat("https://novatechnology.herokuapp.com/api/","work_state")).then((function(e){return e.json()})).then((function(e){r(e.work_state),u(!1)}))}),[u,r]),console.log(a);var b=Object(i.c)((function(e){return e.clients})).clients,h=Object(i.c)((function(e){return e.works})).works,m=A()(A()().format("YYYY-MM-DD")),x=[];return a.map((function(e){var t=A()(A()(e.state[e.state.length-1].fecha).format("YYYY-MM-DD"));m.diff(t,"days")>=5&&("Revision"==e.state[e.state.length-1].nombre||"Presupuesto"==e.state[e.state.length-1].nombre)&&x.push(e)})),console.log(x),Object(s.jsxs)("div",{className:"home",children:[Object(s.jsxs)("div",{className:"home__statistics shadow-md bg-gray-50 mb-2 p-1",children:[Object(s.jsxs)("div",{className:"users",children:[Object(s.jsxs)("div",{className:"users-content rounded-t",children:[Object(s.jsxs)("div",{className:"content-left",children:[Object(s.jsx)("span",{children:b.length}),Object(s.jsx)("h3",{children:"clientes"})]}),Object(s.jsx)("i",{className:"fas fa-user"})]}),Object(s.jsx)("div",{className:"users-foot rounded-b",children:Object(s.jsxs)(o.b,{to:"clients",children:["mas info",Object(s.jsx)("i",{className:"fas fa-angle-double-right"})," "]})})]}),Object(s.jsxs)("div",{className:"works",children:[Object(s.jsxs)("div",{className:"works-content rounded-t",children:[Object(s.jsxs)("div",{className:"content-left",children:[Object(s.jsx)("span",{children:h.length}),Object(s.jsx)("h3",{children:"Trabajos"})]}),Object(s.jsx)("i",{class:"fas fa-th-list"})]}),Object(s.jsx)("div",{className:"works-foot rounded-b",children:Object(s.jsxs)(o.b,{to:"/works",children:["mas info",Object(s.jsx)("i",{className:"fas fa-angle-double-right"})," "]})})]})]}),j?Object(s.jsx)(Z,{}):x.length>0&&Object(s.jsxs)("div",{className:"home__section-recent-works shadow-lg my-1 p-2 rounded-md bg-gray-100",children:[Object(s.jsx)("h3",{className:"text-3xl p-1 mb-2 text-red-400",children:"AVISO"}),Object(s.jsx)(K.a,{spaceBetween:2,slidesPerView:3,navigation:!0,className:"workStateWithoutChange p-2",children:x.map((function(e){return Object(s.jsx)(Q.a,{children:Object(s.jsx)(H,{work:e},e._id)},e._id)}))})]})]})},te=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.auth})),n=t.username,c=t.role;return Object(s.jsxs)("div",{className:"content-header",children:[Object(s.jsx)("i",{onClick:function(){document.querySelector(".toggleMenu").classList.toggle("active"),document.querySelector(".navbar").classList.toggle("active"),document.querySelector(".content-principal").classList.toggle("toggleContentPrincipal"),document.querySelector(".content-header").classList.toggle("toggleContentHeader")},className:"fas fa-bars"}),Object(s.jsxs)("div",{onMouseOut:function(){var e=document.querySelector(".menu-user");e.style.visibility="hidden",e.style.opacity=0},onMouseOver:function(){var e=document.querySelector(".menu-user");e.style.visibility="visible",e.style.opacity=1},className:"content-header-right",children:[Object(s.jsxs)("div",{className:"user-logo",children:["admin"===c?Object(s.jsx)("img",{src:"/assets/img/adminLogo.png"}):Object(s.jsx)("img",{src:"/assets/img/userLogo.png"}),Object(s.jsx)("span",{className:"user-name",children:n})]}),Object(s.jsx)("div",{className:"menu-user",children:Object(s.jsx)("ul",{children:Object(s.jsx)("li",{onClick:function(){e(p())},children:Object(s.jsxs)(o.b,{to:"/work/add",children:[Object(s.jsx)("span",{className:"icon",children:Object(s.jsx)("i",{className:"fas fa-sign-out-alt"})}),Object(s.jsx)("span",{className:"title",children:"Cerrar Sesion"})]})})})})]})]})},ne=function(){var e=Object(i.c)((function(e){return e.auth})),t=(e.uid,e.role),n=Object(i.b)();return Object(s.jsx)("div",{className:"navbar",children:Object(s.jsxs)("div",{className:"navbar__container",children:[Object(s.jsx)("div",{className:"navegation",children:Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{className:"menu-item",children:Object(s.jsxs)(o.b,{to:"/",children:[Object(s.jsx)("span",{className:"icon",children:Object(s.jsx)("i",{class:"fas fa-home"})}),Object(s.jsx)("span",{className:"title",children:"Home"})]})}),Object(s.jsx)("li",{className:"menu-item",children:Object(s.jsxs)(o.b,{to:"/clients",children:[Object(s.jsx)("span",{className:"icon",children:Object(s.jsx)("i",{className:"fas fa-user"})}),Object(s.jsx)("span",{className:"title",children:"Clientes"})]})}),Object(s.jsx)("li",{className:"menu-item",children:Object(s.jsxs)(o.b,{to:"/works",children:[Object(s.jsx)("span",{className:"icon",children:Object(s.jsx)("i",{className:"fas fa-th-list"})}),Object(s.jsx)("span",{className:"title",children:"Trabajos"})]})}),"admin"===t&&Object(s.jsx)("li",{className:"menu-item",children:Object(s.jsxs)(o.b,{to:"/auth/register",children:[Object(s.jsx)("span",{className:"icon",children:Object(s.jsx)("i",{className:"fas fa-user-plus"})}),Object(s.jsx)("span",{className:"title",children:"Registar Usuario "})]})}),"admin"===t&&Object(s.jsx)("li",{className:"menu-item",children:Object(s.jsxs)(o.b,{to:"/orders",children:[Object(s.jsx)("span",{className:"icon",children:Object(s.jsx)("i",{className:"fas fa-th-list"})}),Object(s.jsx)("span",{className:"title",children:"Ordenes"})]})}),Object(s.jsx)("li",{className:"menu-item",children:Object(s.jsxs)(o.b,{to:"/client/add",children:[Object(s.jsx)("span",{className:"icon",children:Object(s.jsx)("i",{class:"fas fa-plus-circle"})}),Object(s.jsx)("span",{className:"title",children:"Agregar Cliente"})]})}),Object(s.jsx)("li",{className:"menu-item",children:Object(s.jsxs)(o.b,{to:"/work/add",children:[Object(s.jsx)("span",{className:"icon",children:Object(s.jsx)("i",{class:"fas fa-plus-circle"})}),Object(s.jsx)("span",{className:"title",children:"Agregar Trabajo"})]})}),Object(s.jsx)("li",{className:"menu-item",children:Object(s.jsxs)(o.b,{to:"/works/histories/all",children:[Object(s.jsx)("span",{className:"icon",children:Object(s.jsx)("i",{class:"fas fa-plus-circle"})}),Object(s.jsx)("span",{className:"title",children:"Historial De Trabajo"})]})}),Object(s.jsx)("li",{onClick:function(){n(p())},className:"menu-item",children:Object(s.jsxs)(o.b,{to:"#",children:[Object(s.jsx)("span",{className:"icon",children:Object(s.jsx)("i",{className:"fas fa-sign-out-alt"})}),Object(s.jsx)("span",{className:"title",children:"Cerrar Sesion"})]})})]})}),Object(s.jsx)("div",{onClick:function(){document.querySelector(".toggleMenu").classList.toggle("active"),document.querySelector(".navbar").classList.toggle("active"),document.querySelector(".content-principal").classList.toggle("toggleContentPrincipal"),document.querySelector(".content-header").classList.toggle("toggleContentHeader")},id:"toggleMenu",className:"toggleMenu"})]})})},se=function(e){return{type:m.a.getAllOrders,payload:e}},ce=(n(241),function(e){var t=e.order,n=Object(c.useState)(!1),a=Object(D.a)(n,2),r=a[0],i=a[1],o=Object(c.useState)(!1),l=Object(D.a)(o,2);l[0],l[1];if(null===t.work)return Object(s.jsx)("div",{children:"Orden no existe ...."});var d=t.work,b=d.marca,h=d.cliente,m=function(){var e=Object(u.a)(j.a.mark((function e(n){var s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),console.log("".concat("https://novatechnology.herokuapp.com/api/","orders/").concat(null===t||void 0===t?void 0:t._id)),e.next=4,fetch("".concat("https://novatechnology.herokuapp.com/api/","orders/").concat(null===t||void 0===t?void 0:t._id));case 4:return s=e.sent,e.next=7,s.json();case 7:c=e.sent,i(!1),console.log(c.ok),c.ok;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{className:"ordertransform p-2 duration-500 flex flex-row justify-between gap-x-3 align-center cursor-pointer  hover:shadow-3xl or"+t._id,children:[Object(s.jsx)("h3",{children:t._id}),Object(s.jsx)("h3",{children:A()(t.createAt).format("DD MM YYYY")}),Object(s.jsx)("h3",{children:h}),Object(s.jsx)("h3",{children:b}),r?Object(s.jsx)("span",{children:"Descargando..."}):Object(s.jsx)("i",{onClick:m,className:"fas fa-arrow-circle-down text-white text-center text-lg  bg-red-300 shadow-md rounded-full flex align-center justify-center w-7 h-7"})]})}),ae=function(){var e=Object(i.b)(),t=Object(c.useState)(!0),n=Object(D.a)(t,2),a=n[0],r=n[1];Object(c.useEffect)((function(){e(function(){var e=Object(u.a)(j.a.mark((function e(t){var n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("orders");case 3:return n=e.sent,e.next=6,n.json();case 6:s=e.sent,console.log(s),s.ok&&t(se(s.orders)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),r(!1)}),[e]);var o=Object(i.c)((function(e){return e.orders})).orders;return console.log(o),Object(s.jsxs)("div",{className:"orders",children:[Object(s.jsx)("div",{className:"title text-5xl text-red-400 p-1 mb-2",children:Object(s.jsx)("h2",{children:"Ordernes"})}),a?Object(s.jsx)(Z,{}):o.length<=0?Object(s.jsx)("div",{className:"p-2 bg-red-200 shadow rounded text-center text-2xl text-red-600",children:"No hay Ordenes disponibles por el momento..."}):Object(s.jsx)("div",{className:"flex flex-col align-center jusify-center bg-gray-100 rounded-md divide-gray-900 shadow-lg divide-y-2 divide-solid",children:o.map((function(e){return Object(s.jsx)(ce,{order:e},e._id)}))})]})},re=function(e){var t=e.history,n=Object(i.b)(),a=Object(c.useState)(""),r=Object(D.a)(a,2),o=(r[0],r[1],Object(c.useState)([])),l=Object(D.a)(o,2),d=l[0],b=l[1],h=Object(c.useState)(!1),m=Object(D.a)(h,2),x=m[0],O=m[1],p=Object(c.useState)(""),g=Object(D.a)(p,2),v=g[0],f=g[1],w=L({name:"",dni:"",phone1:"",phone2:"",direction:"",nota:"",file:"",pathImg:""}),N=Object(D.a)(w,3),y=N[0],C=N[1],S=N[2],E=y.name,I=y.dni,_=y.phone1,T=y.phone2,M=y.direction,Y=y.nota,P=function(){var e=Object(u.a)(j.a.mark((function e(s){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!0),s.preventDefault(),A()?(console.log(v),n(k(y,v)),S(),setTimeout((function(){t.push("/clients")}),1e3)):console.log(d),O(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=!0,t=[];return E&&0!==E.trim().length||(e=!1,t.name=!0),(!I||I.length<8||I.length>8)&&(e=!1,t.dni=!0),(!_||_.length<7)&&(e=!1,t.phone1=!0),b(t),!!e};return Object(s.jsx)("div",{className:"user-add ",children:Object(s.jsxs)("form",{onSubmit:P,className:"user-add-form shadow-lg rounded-md",children:[Object(s.jsx)("h3",{children:"Agregar Cliente"}),Object(s.jsxs)("div",{className:"form-grid",children:[Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:["Nombre Cliente ",Object(s.jsx)("span",{className:"text-red-600",children:"*"})]}),Object(s.jsx)("input",{onChange:C,value:E,type:"text",name:"name",placeholder:"ingresa el nombre",className:"shadow"}),d.name?Object(s.jsx)("span",{className:"text-red-500 text-center bg-red-100 p-1",children:"El nombre es obligatorio"}):null," "]}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:["DNI ",Object(s.jsx)("span",{className:"text-red-600",children:"*"})]}),Object(s.jsx)("input",{onChange:C,value:I,type:"text",placeholder:"ingresa el dni",name:"dni",className:"shadow"}),d.dni?Object(s.jsx)("span",{className:"text-red-500 text-center bg-red-100 p-1",children:"El dni es obligatorio"}):null]}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:["Telefono 1 ",Object(s.jsx)("span",{className:"text-red-600",children:"*"})]}),Object(s.jsx)("input",{onChange:C,value:_,type:"text",name:"phone1",placeholder:"ingresa el numero de celular",className:"shadow"}),d.phone1?Object(s.jsx)("span",{className:"text-red-500 text-center bg-red-100 p-1",children:"Tenes que ingregar por lo menos un celular"}):null]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"Telefono 2"}),Object(s.jsx)("input",{onChange:C,value:T,type:"text",name:"phone2",placeholder:"ingresa el segundo telefono",className:"shadow"})," "]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"Direcci\xf3n"}),Object(s.jsx)("input",{className:"shadow",onChange:C,value:M,type:"text",name:"direction",placeholder:"ingresa la direccion"})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"Nota"}),Object(s.jsx)("input",{className:"shadow",onChange:C,value:Y,type:"text",name:"nota",placeholder:"ingresa una nota"})]})]}),Object(s.jsxs)("div",{className:"my-2",children:[Object(s.jsxs)("label",{htmlFor:"loadImg",style:{display:"flex",justifyContent:"center",alignItems:"center"},className:"loadImage gap-x-2 hover:bg-gray-800 bg-gray-900 text-white cursor-pointer flex justify-between p-1 rounded align-center",children:[Object(s.jsx)("i",{className:"fas fa-plus-circle text-center align-center text-white text-3xl  flex rounded-full p-1 justify-between"}),Object(s.jsx)("span",{className:"text-white",children:" Subir Foto"})]}),Object(s.jsx)("input",{id:"loadImg",onChange:function(e){if(console.log(e.target.files[0].size),e.target.files[0]){var t=new FileReader;t.onload=function(e){var t=e.target.result;f(t),document.querySelector(".imgLoad").setAttribute("src",t)},t.readAsDataURL(e.target.files[0])}},type:"file",className:"hidden",name:"file",accept:"image/*"})]}),Object(s.jsx)("img",{className:"w-32 imgLoad"}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{disabled:x,className:"btn shadow-lg",type:"submit",children:x?"agregando Usuario":" Agregar Cliente"})]})})},ie=function(e){var t,n,c,a,r,l=e.work,d=Object(i.c)((function(e){return e.auth})).role,j="";switch(l.estado.name){case"Revision":j="red-700";break;case"Presupuesto":j="gray-600";break;case"En Reparaci\xf3n":j="yellow-500";break;case"Terminado":j="pink-400";break;default:j="green-700"}return Object(s.jsxs)(o.b,{to:"/works/".concat(l._id),className:"work",children:[(null===l||void 0===l?void 0:l.images.length)>0?(null===l||void 0===l?void 0:l.images[0].url)?Object(s.jsx)("img",{style:{height:150},className:"rounded-t",src:null===l||void 0===l?void 0:l.images[1].url}):Object(s.jsx)("img",{style:{height:150},className:"rounded-t",src:"/assets/img/works/".concat(null===l||void 0===l||null===(t=l.images[0])||void 0===t?void 0:t.fileName)}):Object(s.jsx)("img",{style:{height:150},className:"rounded-t",src:U}),Object(s.jsx)("div",{className:"title p-1",children:Object(s.jsx)("span",{className:"capitalize text-"+j,children:(null===l||void 0===l?void 0:l.marca)+"   "+(null===l||void 0===l?void 0:l.modelo)})}),Object(s.jsx)("div",{className:"observaciones p-1",children:Object(s.jsxs)("span",{children:[null===l||void 0===l?void 0:l.observaciones.slice(0,100)," ",(null===l||void 0===l?void 0:l.observaciones.length)>100?"...":null]})}),Object(s.jsxs)("div",{className:"p-1",children:[" ",Object(s.jsx)("p",{className:"text-gray-700",children:null===l||void 0===l?void 0:l.codigo})]}),Object(s.jsxs)("div",{className:"p-1",children:[" ",Object(s.jsx)("p",{className:"text-gray-300",children:A()(null===l||void 0===l?void 0:l.fechaInicio).format("DD-MM-yyyy")})]}),Object(s.jsxs)("div",{className:"estado p-1 flex justify-between items-center",children:[Object(s.jsx)("span",{className:"rounded-sm text-white bg-".concat(j," p-1"),children:null===l||void 0===l?void 0:l.estado.name}),Object(s.jsx)("i",{className:" fas fa-mobile-alt mr-4 text-"+j})]}),Object(s.jsxs)("div",{className:"cliente-precio flex justify-between bg-gray-200 rounded-b p-1 items-center gap-2",children:[(null===l||void 0===l||null===(n=l.cliente)||void 0===n?void 0:n.pathImg)?Object(s.jsx)("img",{className:"rounded-full w-8 border-1 border-pink-500 h-8",src:"/assets/img/client/".concat(null===l||void 0===l||null===(c=l.cliente)||void 0===c?void 0:c.pathImg)}):Object(s.jsx)("img",{className:"rounded-full w-8 border-1 border-pink-500 h-8",src:B}),Object(s.jsxs)("h3",{className:"capitalize font-serif",children:[null===l||void 0===l||null===(a=l.cliente)||void 0===a||null===(r=a.name)||void 0===r?void 0:r.slice(0,10),"..."]}),"admin"==d&&Object(s.jsx)("span",{className:"work-precio text-"+j,children:"$"+(null===l||void 0===l?void 0:l.total.toFixed(2))})]})]})},oe=function(e){var t=e.match.params.clientId,n=Object(c.useState)([]),a=Object(D.a)(n,2),r=(a[0],a[1],Object(c.useState)(!0)),l=Object(D.a)(r,2),d=l[0],b=l[1],m=Object(i.b)();Object(c.useEffect)((function(){m(function(e){return function(){var t=Object(u.a)(j.a.mark((function t(n){var s,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h("clients/".concat(e));case 3:return s=t.sent,t.next=6,s.json();case 6:(c=t.sent).ok&&n(S(c.client)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[m]);var x=Object(i.c)((function(e){return e.clients})).client,O=Object(i.c)((function(e){return e.auth})).role;console.log(x),Object(c.useEffect)((function(){var e;m((e=null===x||void 0===x?void 0:x._id,function(){var t=Object(u.a)(j.a.mark((function t(n){var s,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h("works/client/".concat(e));case 3:return s=t.sent,t.next=6,s.json();case 6:(c=t.sent).ok?n(C(c.works)):n(y()),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}())),b(!1)}),[m,null===x||void 0===x?void 0:x._id]);var p=L({name:null===x||void 0===x?void 0:x.name,dni:null===x||void 0===x?void 0:x.dni,phone1:null===x||void 0===x?void 0:x.phone1,phone2:null===x||void 0===x?void 0:x.phone2,direction:null===x||void 0===x?void 0:x.direction}),g=Object(D.a)(p,3),v=g[0];g[1],g[2];console.log(v);v.name,v.dni,v.phone1,v.phone2,v.direction;var f=Object(i.c)((function(e){return e.clients})).clientWorks,w=function(){document.querySelector(".modal-client-img").classList.toggle("hidden")};return Object(s.jsxs)("div",{className:"userBox",children:[Object(s.jsx)("div",{className:"user-header",children:Object(s.jsxs)("div",{className:"one-user",children:[Object(s.jsx)("div",{onClick:w,className:"shadow-md cursor-pointer",children:(null===x||void 0===x?void 0:x.pathImg)?Object(s.jsx)("img",{className:"w-32 h-32 ",src:"/assets/img/client/".concat(null===x||void 0===x?void 0:x.pathImg),alt:null===x||void 0===x?void 0:x.name}):Object(s.jsx)("img",{src:"/assets/img/userLogo.png",className:"rounded-full h-full w-full"})}),Object(s.jsxs)("div",{className:"user-info",children:[Object(s.jsxs)("h4",{children:["Nombre : ",null===x||void 0===x?void 0:x.name]}),Object(s.jsxs)("h4",{children:["DNI : ",null===x||void 0===x?void 0:x.dni]}),Object(s.jsxs)("h4",{children:["DNI : ",null===x||void 0===x?void 0:x.direction]}),Object(s.jsxs)("h4",{children:["Tel 01 : ",null===x||void 0===x?void 0:x.phone1]}),Object(s.jsxs)("h4",{children:["Tel 02 : ",(null===x||void 0===x?void 0:x.phone2)?x.phone2:"..."]}),Object(s.jsxs)("h4",{children:["Nota : ",null===x||void 0===x?void 0:x.nota]}),Object(s.jsxs)("h4",{children:["Fecha de Alta : ",A()(null===x||void 0===x?void 0:x.createdAt).format("DD-MM-yyyy")]})]}),Object(s.jsx)("div",{className:"user-header-action",children:"admin"===O&&Object(s.jsx)("button",{children:"Edit"})})]})}),Object(s.jsxs)("div",{className:"works-grid",children:[f.length>0?d?Object(s.jsx)(Z,{}):f.map((function(e){return Object(s.jsx)(ie,{work:e},e._id)})):Object(s.jsxs)("div",{className:"no-result",children:[Object(s.jsxs)("h1",{className:"no-works",children:[Object(s.jsxs)("span",{children:[null===x||void 0===x?void 0:x.name," "]}),"nunca hizo un trabajo..."]}),Object(s.jsx)("i",{class:"fas fa-sad-tear"})]}),Object(s.jsx)("div",{className:"bg-gray-200 add-work-user shadow rounded hover:bg-gray-300 hover:shadow-lg",children:Object(s.jsx)(o.b,{to:"/work/add#".concat(null===x||void 0===x?void 0:x._id),className:"flex justify-center items-center h-full text-pink-500",children:Object(s.jsx)("i",{class:"fas fa-plus-circle duration-800"})})})]}),Object(s.jsxs)("div",{className:"modal-client-img hidden absolute z-10 bg-gray-600 w-full bg-opacity-50 place-content-center max-h-auto min-h-screen flex justify-center items-center top-0 left-0",children:[Object(s.jsx)("div",{onClick:w,className:"overlay  absolute h-full w-full top-0 left-0"}),Object(s.jsx)("div",{id:"img-client",className:"flex justify-center  items-center",children:Object(s.jsx)("img",{className:"max-w-lg z-20 border-2 border-bg-red-200",src:"/assets/img/client/".concat(null===x||void 0===x?void 0:x.pathImg)})}),Object(s.jsx)("span",{onClick:w,className:"absolute text-center flex justify-center items-center text-right top-10 right-10 h-10 w-10 rounded-full bg-white shadow-md p-1 cursor-pointer",children:Object(s.jsx)("i",{class:"far fa-times-circle text-3xl text-red-300"})})]})]})},le=function(e){var t=e.client;return console.log(t),Object(s.jsxs)("div",{className:"user",children:[Object(s.jsx)("div",{className:"img-user",children:(null===t||void 0===t?void 0:t.pathImg)?"htt"==t.pathImg.slice(0,3)?Object(s.jsx)("img",{className:"rounded-full w-24 h-24 shadow-md border-2",src:null===t||void 0===t?void 0:t.pathImg}):Object(s.jsx)("img",{className:"rounded-full w-24 h-24 shadow-md border-2",src:"./assets/img/client/".concat(t.pathImg)}):Object(s.jsx)("img",{src:"./assets/img/userLogo.png",className:"rounded-full w-24 h-24 shadow-md border-2"})}),Object(s.jsx)("hr",{}),Object(s.jsx)("div",{className:"user-info",children:Object(s.jsx)("h4",{className:"capitalize",children:t.name})}),Object(s.jsx)("hr",{}),Object(s.jsx)(o.b,{to:"clients/".concat(t._id),children:"Ver Cliente"})]})},de=function(){var e=Object(i.b)(),t=Object(c.useState)(""),n=Object(D.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)([]),l=Object(D.a)(o,2),d=l[0],j=l[1],u=Object(c.useState)(!0),b=Object(D.a)(u,2),h=b[0],m=b[1];Object(c.useEffect)((function(){e(N()),m(!1)}),[e]);var x=Object(i.c)((function(e){return e.clients})).clients;Object(c.useEffect)((function(){m(!0),j(x.filter((function(e){return e.dni.includes(a)||e.name.toLowerCase().includes(a.toLowerCase())}))),m(!1)}),[a]);return Object(s.jsxs)("div",{className:"users",children:[x.length>=10&&Object(s.jsx)("div",{className:"box-search relative",children:Object(s.jsxs)("div",{className:"search-box-userworks bg-gray-800  border-2 border-gray-200",children:[Object(s.jsx)("form",{className:"w-full",children:Object(s.jsx)("input",{value:a,onChange:function(e){return r(e.target.value)},placeholder:"Buscar cliente por nombre o dni...",name:"searchClient",type:"text",autoComplete:"off",className:"text-gray-900",id:"searchClientInput"})}),Object(s.jsx)("i",{onClick:function(){r(""),j([])},class:"fas fa-times cursor-pointer duration-500 text-gray-600  right-3 bg-gray-100 hover:text-white hover:bg-red-500"})]})}),a.length>0&&0===d.length&&Object(s.jsx)("div",{className:"message-result-empty   bg-red-500 p-2 my-2 w-12/12 shadow-md rounded text-center",children:"No hay resultado para este filtro..."}),h?Object(s.jsx)(Z,{}):d.length>0?Object(s.jsx)("div",{className:"h-12/12 bg-gray-50 users-grid",children:d.map((function(e){return Object(s.jsx)(le,{client:e},e._id)}))}):Object(s.jsx)("div",{className:"h-12/12 bg-gray-50 users-grid",children:x.map((function(e){return Object(s.jsx)(le,{client:e},e._id)}))})]})},je=function(e){var t=e.history,n=Object(i.b)();Object(c.useEffect)((function(){n(N())}),[n]);var a=Object(i.c)((function(e){return e.clients})).clients,r=Object(c.useState)([]),o=Object(D.a)(r,2),l=o[0],d=o[1],m=Object(c.useState)(!1),x=Object(D.a)(m,2),p=x[0],g=x[1],v=Object(c.useState)(!1),f=Object(D.a)(v,2),w=f[0],k=f[1],y=Object(c.useState)(!1),C=Object(D.a)(y,2),S=C[0],E=C[1],I=Object(c.useState)(!1),_=Object(D.a)(I,2),T=_[0],M=(_[1],Object(c.useState)(!1)),Y=Object(D.a)(M,2),P=Y[0],W=(Y[1],Object(c.useState)("")),R=Object(D.a)(W,2),q=R[0],F=R[1],z=Object(c.useState)(0),U=Object(D.a)(z,2),B=(U[0],U[1],Object(c.useState)(null)),H=Object(D.a)(B,2),V=H[0],J=H[1],$=Object(c.useState)([]),G=Object(D.a)($,2),X=G[0],K=G[1],Q=Object(c.useState)(!1),Z=Object(D.a)(Q,2),ee=Z[0],te=Z[1],ne=Object(c.useState)(null),se=Object(D.a)(ne,2),ce=se[0],ae=(se[1],Object(c.useState)(null)),re=Object(D.a)(ae,2),ie=re[0],oe=re[1];Object(c.useEffect)((function(){fetch("".concat("https://novatechnology.herokuapp.com/api/","state")).then((function(e){return e.json()})).then((function(e){console.log(e),K(e.states)}))}),[K]);var le=L({marca:"",modelo:"",emei:"",estado:"",precio:0,descuento:0,fachasEncontradas:"",observaciones:"",descripcion:"",recargo:0,cliente:"",fechaInicio:A()().format("yyyy MM DD"),fechaFin:null,tieneContrasena:T,esPatron:P,contrasena:"",patron:""}),de=Object(D.a)(le,3),je=de[0],ue=de[1],be=de[2];console.log(ce);var he=je.marca,me=je.modelo,xe=je.emei,Oe=je.estado,pe=je.precio,ge=je.descuento,ve=je.fachasEncontradas,fe=je.descripcion,we=je.observaciones,Ne=je.recargo,ke=je.cliente,ye=je.esPatron,Ce=je.tieneContrasena,Se=je.contrasena,Ee=je.patron,De=function(){var e=!0,t=[];return he&&0!==he.trim().length||(e=!1,t.marca=!0),me&&0!==me.trim().length||(e=!1,t.modelo=!0),ke||(e=!1,t.cliente=!0),Oe||(e=!1,t.estado=!0),1==(null===V||void 0===V?void 0:V.length)&&(e=!1,t.files=!0),we&&0!==we.trim().length||(e=!1,t.observaciones=!0),Ce&&(ye||0!=Se.length?g(!1):(g(!0),e=!1)),ye&&(0==Ee.length?(g(!0),e=!1):g(!1)),d(t),!!e};return Object(s.jsxs)("div",{className:"work-add",children:[Object(s.jsx)("h3",{children:"Agregar Trabajo"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),te(!0),De()?(console.log(je),n(function(e,t){return function(){var n=Object(u.a)(j.a.mark((function n(s){var c,a,r,i,o;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(t),n.prev=1,!t){n.next=22;break}return n.next=5,b("works/uploadFileWork",t,"POST");case 5:return c=n.sent,n.next=8,c.json();case 8:if(a=n.sent,console.log(a),!a.ok){n.next=20;break}return e.images=a.pathImg,n.next=14,h("works",e,"POST");case 14:return r=n.sent,n.next=17,r.json();case 17:i=n.sent,console.log(i),i.ok?O.a.fire("success","Se agreg\xf3 correctamente el trabajo","success"):O.a.fire("Error","Se produjo un error al agregar el trabajo","Error");case 20:n.next=29;break;case 22:return n.next=24,h("works",e,"POST");case 24:return o=n.sent,n.next=27,o.json();case 27:n.sent.ok?O.a.fire("success","Se agreg\xf3 correctamente el trabajo","success"):O.a.fire("Error","Se produjo un error al agregar el trabajo","Error");case 29:n.next=35;break;case 31:n.prev=31,n.t0=n.catch(1),console.log(n.t0),O.a.fire("error","Hubo un fallo al hacer la petition...","error");case 35:case"end":return n.stop()}}),n,null,[[1,31]])})));return function(e){return n.apply(this,arguments)}}()}(je,ie)),be(),setTimeout((function(){t.push("/works")}),1e3)):(console.log(l),console.log(je)),te(!1)},encType:"multipart/form-data",method:"POST",className:"work-add-form",children:[Object(s.jsxs)("div",{className:"grid-content",children:[Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:["Marca",Object(s.jsx)("span",{className:"text-red-600",children:"*"})]}),Object(s.jsx)("input",{onChange:ue,value:he,type:"text",name:"marca",placeholder:"ingresa la marca"}),l.marca?Object(s.jsx)("h5",{className:"bg-red-100 text-red-800 p-2 my-2 text-center",children:"La marca es obligatoria"}):null]}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:["Modelo",Object(s.jsx)("span",{className:"text-red-600",children:"*"})]}),Object(s.jsx)("input",{onChange:ue,value:me,type:"text",name:"modelo",placeholder:"ingresa el modelo"}),l.modelo?Object(s.jsx)("h5",{className:"bg-red-100 text-red-800 p-2 my-2 text-center",children:"El modelo es obligatoria"}):null]}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:["Cliente",Object(s.jsx)("span",{className:"text-red-600",children:"*"})]}),Object(s.jsx)("div",{children:Object(s.jsxs)("select",{value:ke,onChange:ue,name:"cliente",children:[Object(s.jsx)("option",{value:"",disabled:!0,children:"Elegir un cliente"}),a.map((function(e){return Object(s.jsx)("option",{value:e._id,children:e.dni.toString()},e._id)}))]})}),l.cliente?Object(s.jsx)("h5",{className:"bg-red-100 text-red-800 p-2 my-2 text-center",children:"Debe seleccionar un cliente"}):null]}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:["Estado",Object(s.jsx)("span",{className:"text-red-600",children:"*"})]}),Object(s.jsxs)("select",{value:Oe,onChange:ue,name:"estado",children:[Object(s.jsx)("option",{value:"",disabled:!0,children:"seleccionarEstado"}),X.map((function(e){return Object(s.jsxs)("option",{value:e._id,children:[" ",e.name," "]},e._id)}))]}),l.estado?Object(s.jsx)("h5",{className:"bg-red-100 text-red-800 p-2 my-2 text-center",children:"El estado es obligatorio"}):null]}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:["Emei",Object(s.jsx)("span",{className:"text-red-600",children:"*"})]}),Object(s.jsx)("input",{onChange:ue,value:xe,type:"number",name:"emei",min:1,minLength:25}),l.emei?Object(s.jsx)("h5",{className:"bg-red-100 text-red-800 p-2 my-2 text-center",children:"El emei es obligatoria, debe tener 25 numeros"}):null]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"recargo"}),Object(s.jsx)("input",{value:Ne,onChange:ue,type:"number",name:"recargo",min:0})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"precio"}),Object(s.jsx)("input",{value:pe,onChange:ue,type:"number",name:"precio",min:0})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"descuento"}),Object(s.jsx)("input",{onChange:ue,type:"number",name:"descuento",value:ge,min:0})]})]}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:["Observaciones",Object(s.jsx)("span",{className:"text-red-600",children:"*"})]}),Object(s.jsx)("textarea",{value:we,onChange:ue,name:"observaciones",children:" "}),l.observaciones?Object(s.jsx)("h5",{className:"bg-red-100 text-red-800 p-2 my-2 text-center",children:"La(s) observaciones es obligatoria"}):null,Object(s.jsx)("label",{children:"Facha(s) Detectada(s)"}),Object(s.jsx)("textarea",{value:ve,onChange:ue,name:"fachasEncontradas"}),Object(s.jsx)("label",{children:"Descripci\xf3n del trabajo a realizar"}),Object(s.jsx)("textarea",{value:fe,onChange:ue,name:"descripcion"})]}),Object(s.jsxs)("div",{className:"flex items-center",children:[Object(s.jsx)("label",{className:"labelPassword",children:"\xbfTienes contrase\xf1a ?"}),Object(s.jsx)("input",{onClick:function(e){e.target.checked?(k(!0),je.tieneContrasena=!0):(k(!1),je.tieneContrasena=!1,je.contrasena="")},name:"tieneContrasena",className:"checkPassword",type:"checkbox"})]}),Object(s.jsx)("br",{}),w&&Object(s.jsxs)("div",{className:"",children:[Object(s.jsxs)("div",{className:"flex items-center mb-1",children:[Object(s.jsx)("label",{className:"labelPassword",children:"\xbfEs patron ?"}),Object(s.jsx)("input",{onClick:function(e){e.target.checked?(E(!0),je.esPatron=!0,je.contrasena="",document.querySelector("#input-password").classList.add("hidden")):(je.contrasena="",je.patron="",F(""),E(!1),je.esPatron=!1,document.querySelector("#input-password").classList.remove("hidden"))},className:"checkPatron",name:"checkPatron",type:"checkbox"})]}),Object(s.jsxs)("div",{id:"input-password",children:[Object(s.jsxs)("label",{children:["Contrase\xf1a ",Object(s.jsx)("span",{className:"text-red-500",children:" *"})," "]}),Object(s.jsx)("input",{value:Se,onChange:ue,name:"contrasena",type:"text",placeholder:"ingresa su contrase\xf1a"})]})]}),Object(s.jsx)("br",{}),S&&Object(s.jsx)("div",{className:"patron grid grid-cols-3 gap-2 my-1",children:[1,2,3,4,5,6,7,8,9].map((function(e){return Object(s.jsx)("button",{type:"button",onClick:function(e){F(q+e.target.textContent),je.patron=q+e.target.textContent,e.target.classList.add("bg-blue-600"),e.target.classList.add("text-gray-900"),e.target.classList.add("cursor-not-allowed"),e.target.classList.add("disabled")},className:" flex justify-center m-auto dat w-12 h-12 flex items-center text-white justify-center cursor-pointer hover:bg-blue-600 duration-500 rounded-full bg-red-600",children:e},e)}))}),p?Object(s.jsx)("h5",{className:"bg-red-100 text-red-800 p-2 mt-4 text-center",children:"La Contrase\xf1a es obligatoria"}):null,Object(s.jsx)("br",{}),S?Object(s.jsx)("div",{className:"text-center text-gray-700 p-2 mb-3 my-2 w-full bg-gray-100 shadow rouded",children:q}):null,Object(s.jsxs)("div",{className:"my-2",children:[Object(s.jsxs)("label",{htmlFor:"loadImg",style:{display:"flex",justifyContent:"center",alignItems:"center"},className:"loadImage gap-x-2 hover:bg-gray-800 bg-gray-900 text-white cursor-pointer flex justify-between p-1 rounded align-center",children:[Object(s.jsx)("i",{className:"fas fa-plus-circle text-center align-center text-white text-3xl  flex rounded-full p-1 justify-between"}),Object(s.jsx)("span",{className:"text-white",children:" Subir Foto"})]}),l.files?Object(s.jsx)("h5",{className:"bg-red-100 text-red-800 p-2 my-2 text-center",children:"Debe subir por lo menos 2 images o ninguna"}):null,Object(s.jsx)("input",{id:"loadImg",onChange:function(e){J(e.target.files);var t=[];if(e.target.files)for(var n=0;n<e.target.files.length;n++){console.log("images");var s=new FileReader;s.onload=function(e){var n=e.target.result;t.push(n)},s.readAsDataURL(e.target.files[n])}console.log("lenght "+t.length),oe(t),function(e){if(e)for(var t=function(t){(s=new FileReader).onload=function(e){var n=e.target.result;document.querySelector(".image".concat(t)).setAttribute("src",n)},s.readAsDataURL(e[t])},n=0;n<e.length;n++){var s;t(n)}}(e.target.files)},type:"file",className:"hidden",name:"file",multiple:!0,accept:"image/*"})]}),Object(s.jsxs)("div",{className:"images grid gap-2 grid-cols-3 p-2 bg-gray-300 shadow rounded",children:[Object(s.jsx)("img",{className:"image0 w-32 "}),Object(s.jsx)("img",{className:"image1  w-32"}),Object(s.jsx)("img",{className:"image2  w-32"})]}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{className:"btn",type:"submit",children:ee?"Espere...":"  Agregar Trabajo"})]})]})};V.a.use([J.a,$.a,G.a,X.a]);var ue=function(e){var t,n,a,r,l,d=e.match,b=e.history,m=Object(i.b)();Object(c.useEffect)((function(){m(N())}),[m]);Object(i.c)((function(e){return e.clients})).clients;var x=Object(c.useState)(200),p=Object(D.a)(x,2),g=p[0],v=p[1],f=Object(i.c)((function(e){return e.auth})).role,w=Object(c.useState)([]),k=Object(D.a)(w,2),y=k[0],C=k[1],S=Object(c.useState)([]),E=Object(D.a)(S,2),I=E[0],_=E[1],T=Object(c.useState)([]),M=Object(D.a)(T,2),Y=M[0],P=M[1],W=Object(c.useState)(!1),R=Object(D.a)(W,2),F=R[0],U=R[1],B=d.params.workId;Object(c.useEffect)((function(){m(function(e){return function(){var t=Object(u.a)(j.a.mark((function t(n){var s,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h("works/".concat(e));case 3:return s=t.sent,t.next=6,s.json();case 6:c=t.sent,console.log(c.work),c.ok?n(z(c.work)):O.a.fire("error","Hubo un error en la consula intente de nuevo","error"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),O.a.fire("error",t.t0,"error");case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(B))}),[m]),Object(c.useEffect)((function(){fetch("".concat("https://novatechnology.herokuapp.com/api/","state")).then((function(e){return e.json()})).then((function(e){C(e.states)}))}),[C]);var H=Object(i.c)((function(e){return e.works})).work,V=L({marca:null===H||void 0===H?void 0:H.marca,modelo:null===H||void 0===H?void 0:H.modelo,emei:null===H||void 0===H?void 0:H.emei,estado:null===H||void 0===H?void 0:H.estado._id,precio:null===H||void 0===H?void 0:H.precio,descuento:null===H||void 0===H?void 0:H.descuento,fachasEncontradas:null===H||void 0===H?void 0:H.fachasEncontradas,observaciones:null===H||void 0===H?void 0:H.observaciones,descripcion:null===H||void 0===H?void 0:H.descripcion,recargo:null===H||void 0===H?void 0:H.recargo,cliente:null===H||void 0===H?void 0:H.cliente,fechaInicio:null===H||void 0===H?void 0:H.fechaInicio,fechaFin:null===H||void 0===H?void 0:H.fechaFin}),J=Object(D.a)(V,3),$=J[0],G=J[1],X=J[2];Object(c.useEffect)(Object(u.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("work_state/getStates/".concat(B));case 2:return t=e.sent,e.next=5,t.json();case 5:(n=e.sent).ok&&P(n.workState.state);case 7:case"end":return e.stop()}}),e)}))),[B]),console.log(H);var Z=$.marca,ee=$.modelo,te=$.emei,ne=$.estado,se=$.precio,ce=$.descuento,ae=$.fachasEncontradas,re=$.descripcion,ie=$.observaciones,oe=$.recargo,le="";switch(null===H||void 0===H?void 0:H.estado.name){case"Revision":le="text-red-700";break;case"Presupuesto":le="text-gray-400";break;case"En Reparaci\xf3n":le="text-yellow-500";break;case"Terminado":le="text-green-200";break;default:le="text-green-500"}var de=function(){var e=Object(u.a)(j.a.mark((function e(t){var n,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!je()){e.next=19;break}return console.log($),m(q($,B)),e.next=6,h("work_state/getStates/".concat(null===H||void 0===H?void 0:H._id));case 6:return n=e.sent,e.next=9,n.json();case 9:(s=e.sent).ok&&P(s.workState.state),console.log(Y),c="/works/".concat(B),X(),console.log(c),U(!F),setTimeout((function(){document.querySelector("#editWork").style.display="none",b.push(c)}),1e3),e.next=20;break;case 19:console.log(I);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=!0,t=[];return Z&&0!==Z.trim().length||(e=!1,t.marca=!0),ee&&0!==ee.trim().length||(e=!1,t.modelo=!0),te&&0!==te.length||(e=!1,t.emei=!0),ne||(e=!1,t.estado=!0),ie&&0!==ie.trim().length||(e=!1,t.observaciones=!0),_(t),!!e};return Object(s.jsxs)("div",{className:"one-work relative",children:["admin"===f&&Object(s.jsx)("div",{className:"absolute hover:bg-gray-200 rounded-full",children:Object(s.jsx)("a",{href:"#editWork",className:"p-3 h-24 w-24 rounded-full text-white bg-red-600",children:Object(s.jsx)("i",{className:"fas fa-pen"})})}),Object(s.jsxs)("div",{className:"one-work-grid",children:[(null===H||void 0===H?void 0:H.images.length)>0?Object(s.jsx)(K.a,{spaceBetween:2,slidesPerView:1,navigation:!0,pagination:{clickable:!0},onSlideChange:function(){return console.log("slide change")},onSwiper:function(e){return console.log(e)},className:"oneWorkCarrousel",children:null===H||void 0===H?void 0:H.images.map((function(e){return Object(s.jsxs)(Q.a,{children:[" ",Object(s.jsx)("img",{className:"",src:"/assets/img/works/".concat(e.fileName)},e.fileName)]},e.fileName)}))}):Object(s.jsx)("i",{className:" fas fa-mobile-alt flex justify-center items-center "+le}),Object(s.jsxs)("div",{className:"one-work-body grid grid-cols-2 grid-rows-2 gap-2",children:[Object(s.jsxs)("div",{className:"work-data shadow rounded bg-gray-400 p-1",children:[Object(s.jsxs)("p",{children:["Codigo : ",null===H||void 0===H?void 0:H.codigo," "]}),Object(s.jsxs)("p",{children:["Marca : ",null===H||void 0===H?void 0:H.marca," "]}),Object(s.jsxs)("p",{children:["Modelo : ",null===H||void 0===H?void 0:H.modelo]}),Object(s.jsxs)("p",{children:["Imei : ",null===H||void 0===H?void 0:H.emei]}),Object(s.jsxs)("p",{children:["Estado:",null===H||void 0===H?void 0:H.estado.name]}),(null===H||void 0===H?void 0:H.tieneContrasena)&&Object(s.jsxs)("p",{children:["Contrase\xf1a : ",null===H||void 0===H?void 0:H.contrasena]})]}),Object(s.jsxs)("div",{className:"client-data rounded shadow bg-blue-400 p-1",children:[Object(s.jsx)("img",{className:"rounded-full h-12 w-12",src:"/assets/img/client/".concat(null===H||void 0===H||null===(t=H.cliente)||void 0===t?void 0:t.pathImg)}),Object(s.jsxs)("p",{children:["Cliente :"," ",Object(s.jsxs)(o.b,{className:"underline text-white",to:"/clients/".concat(null===H||void 0===H||null===(n=H.cliente)||void 0===n?void 0:n._id),children:[" ",null===H||void 0===H||null===(a=H.cliente)||void 0===a?void 0:a.name," "]})]}),Object(s.jsxs)("p",{children:["DNI : ",null===H||void 0===H||null===(r=H.cliente)||void 0===r?void 0:r.dni]}),Object(s.jsxs)("p",{children:["Celular 1 : ",null===H||void 0===H||null===(l=H.cliente)||void 0===l?void 0:l.phone1]})]}),Object(s.jsxs)("div",{className:"price-data rounded shadow bg-red-400 p-1",children:[Object(s.jsxs)("p",{children:["Pecargo: ",null===H||void 0===H?void 0:H.recargo]}),Object(s.jsxs)("p",{children:["Precio: ",null===H||void 0===H?void 0:H.precio]}),Object(s.jsxs)("p",{children:["descuento: ",null===H||void 0===H?void 0:H.descuento]}),Object(s.jsxs)("p",{children:["Total: ",null===H||void 0===H?void 0:H.total]})]}),Object(s.jsxs)("div",{className:"price-data rounded shadow bg-red-400 p-1",children:[Object(s.jsxs)("span",{className:"text-white text-lg underline",children:["Historiales de Estados"," "]}),Y.map((function(e){return Object(s.jsx)("p",{children:e.nombre+" - "+A()(e.fecha).format("DD-MM-YY hh:mm:ss a")})}))]}),(null===H||void 0===H?void 0:H.fachasEncontradas)&&Object(s.jsx)("div",{className:"trouble-data rounded shadow bg-green-400 p-1",children:Object(s.jsxs)("p",{children:["facha(s) Encontradas : ",null===H||void 0===H?void 0:H.fachasEncontradas]})}),(null===H||void 0===H?void 0:H.observaciones)&&Object(s.jsx)("div",{className:"trouble-data transition duration-1000 ease-in-out rounded shadow bg-yellow-400 p-1",children:Object(s.jsxs)("p",{className:"transition duration-1000 ease-in-out",children:["Observaciones : ",Object(s.jsx)("br",{})," ",null===H||void 0===H?void 0:H.observaciones.slice(0,g),(null===H||void 0===H?void 0:H.observaciones.length)>200?Object(s.jsx)("span",{onClick:function(e){v(null===H||void 0===H?void 0:H.observaciones.length),e.target.classList.add("hidden"),document.querySelector(".ver-menos").classList.remove("hidden")},className:"ver-mas cursor-pointer text-white duration-500",children:"...Ver M\xe1s"}):null,Object(s.jsx)("span",{onClick:function(e){v(200),e.target.classList.add("hidden"),document.querySelector(".ver-mas").classList.remove("hidden")},className:"ver-menos cursor-pointer text-pink-400 duration-500 hidden",children:"...Ver Menos"})]})}),(null===H||void 0===H?void 0:H.descripcion)&&Object(s.jsx)("div",{className:"trouble-data rounded-md bg-pink-400 p-1",children:Object(s.jsxs)("p",{children:["descripcion : ",Object(s.jsx)("br",{})," ",null===H||void 0===H?void 0:H.descripcion]})})]})]}),(null===H||void 0===H?void 0:H.esPatron)&&Object(s.jsxs)("div",{className:"patron grid grid-cols-2 p-2 shadow my-2",children:[Object(s.jsx)("div",{className:"text-green-500 text-4xl text-center flex justify-center items-center",children:null===H||void 0===H?void 0:H.patron}),Object(s.jsx)("div",{className:"patron grid grid-cols-3 gap-2 my-1",children:[1,2,3,4,5,6,7,8,9].map((function(e){return Object(s.jsx)("button",{type:"button",className:(null===H||void 0===H?void 0:H.patron.includes(e))?"bg-green-700  w-8 h-8 flex justify-center items-center hover:bg-green-400 duration-600 ":"bg-gray-200  w-8 h-8 flex justify-center items-center hover:bg-green-400  duration-600",children:e},e)}))})]}),Object(s.jsxs)("div",{id:"editWork",className:"overlay",children:[Object(s.jsx)("a",{href:"#",className:"close-modal"}),Object(s.jsxs)("div",{className:"modal-edit-work",children:[Object(s.jsx)("h3",{children:"Agregar Trabajo"}),Object(s.jsxs)("form",{onSubmit:de,className:"work-edit-form",children:[Object(s.jsxs)("div",{className:"grid-content",children:[Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:["Marca",Object(s.jsx)("span",{className:"text-red-600",children:"*"})]}),Object(s.jsx)("input",{onChange:G,value:Z,type:"text",name:"marca",placeholder:"ingresa la marca"}),I.marca?Object(s.jsx)("h5",{className:"bg-red-100 text-red-800 p-2 my-2 text-center",children:"La marca es obligatoria"}):null]}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:["Modelo",Object(s.jsx)("span",{className:"text-red-600",children:"*"})]}),Object(s.jsx)("input",{onChange:G,value:ee,type:"text",name:"modelo",placeholder:"ingresa el modelo"}),I.modelo?Object(s.jsx)("h5",{className:"bg-red-100 text-red-800 p-2 my-2 text-center",children:"El modelo es obligatoria"}):null]}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:["Cliente",Object(s.jsx)("span",{className:"text-red-600",children:"*"})]}),Object(s.jsx)("div",{children:Object(s.jsx)("input",{readOnly:!0,value:null===H||void 0===H?void 0:H.cliente.dni})}),I.cliente?Object(s.jsx)("h5",{className:"bg-red-100 text-red-800 p-2 my-2 text-center",children:"Debe seleccionar un cliente"}):null]}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:["Estado",Object(s.jsx)("span",{className:"text-red-600",children:"*"})]}),Object(s.jsxs)("select",{value:ne,onChange:G,name:"estado",children:[Object(s.jsx)("option",{value:"",disabled:!0,children:"seleccionarEstado"}),y.map((function(e){return Object(s.jsxs)("option",{value:e._id,children:[" ",e.name," "]},e._id)}))]}),I.estado?Object(s.jsx)("h5",{className:"bg-red-100 text-red-800 p-2 my-2 text-center",children:"El estado es obligatorio"}):null]}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:["Emei",Object(s.jsx)("span",{className:"text-red-600",children:"*"})]}),Object(s.jsx)("input",{onChange:G,value:te,type:"number",name:"emei"}),I.emei?Object(s.jsx)("h5",{className:"bg-red-100 text-red-800 p-2 my-2 text-center",children:"El emei es obligatoria"}):null]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"recargo"}),Object(s.jsx)("input",{value:oe,onChange:G,type:"number",name:"recargo"})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"precio"}),Object(s.jsx)("input",{value:se,onChange:G,type:"number",name:"precio"})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"descuento"}),Object(s.jsx)("input",{onChange:G,type:"number",name:"descuento",value:ce})]})]}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("label",{children:["Observaciones",Object(s.jsx)("span",{className:"text-red-600",children:"*"})]}),Object(s.jsx)("textarea",{value:ie,onChange:G,name:"observaciones",children:" "}),Object(s.jsx)("label",{children:"Facha(s) Detectada(s)"}),Object(s.jsx)("textarea",{value:ae,onChange:G,name:"fachasEncontradas"}),Object(s.jsx)("label",{children:"Descripci\xf3n del trabajo a realizar"}),Object(s.jsx)("textarea",{value:re,onChange:G,name:"descripcion"})]}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{className:"btn",type:"submit",children:"Editar Trabajo"})]}),Object(s.jsx)("a",{href:"#",className:"close",children:"x"})]})]})]})},be=function(){var e=L({estado:""}),t=Object(D.a)(e,2),n=t[0],a=t[1],r=n.estado,l=Object(c.useState)(""),d=Object(D.a)(l,2),j=d[0],u=d[1],b=Object(c.useState)(!0),h=Object(D.a)(b,2),m=h[0],x=h[1],O=Object(c.useState)([]),p=Object(D.a)(O,2),g=p[0],v=p[1],f=Object(i.b)();Object(c.useEffect)((function(){f(R()),x(!1)}),[f,r]);var w=Object(i.c)((function(e){return e.works})).works;Object(c.useEffect)((function(){v(w),v("Todos"==r||""==r?w:w.filter((function(e){return e.estado.name===r})))}),[r]),Object(c.useEffect)((function(){console.log(j),v(w),""!==j&&v(g.filter((function(e){return e.codigo.includes(j)})))}),[j]);return Object(s.jsxs)("div",{className:"works ",children:[Object(s.jsx)("div",{className:"search-box-all-works w-full overflow-hidden shadow my-2 p-2",children:Object(s.jsxs)("form",{className:"flex w-full flex-wrap lg:justify-center gap-y-2 flex-col sm:flex-row md:justify-between items-center sm:gap-x-2",children:[Object(s.jsxs)("select",{className:"sm:rounded-full shadow  sm:w-min w-full",name:"estado",onChange:a,value:r,children:[Object(s.jsx)("option",{value:"",disabled:!0,children:"Filtrar por estado"}),["Revision","Presupuesto","En Reparacion","Terminado","Entregado","Todos"].map((function(e){return Object(s.jsx)("option",{value:e,children:e},e)}))]}),Object(s.jsx)("input",{name:"codigo",className:"shadow sm:rounded-full   sm:w-min w-full",value:j,onChange:function(e){u(e.target.value)},placeholder:"Buscar codigo de trabajo",type:"text"})]})}),0===g.length&&Object(s.jsx)("div",{className:"message-result-empty hidden  bg-red-500 text-gray-100 p-2 my-2 w-12/12 shadow-md rounded text-center",children:"No hay resultado para este filtro..."}),m?Object(s.jsx)(Z,{}):w.length<=0&&g.length<=0?Object(s.jsxs)("div",{className:"",children:[Object(s.jsx)("div",{className:"w-full mb-4 w-12/12 message-result-empty",children:Object(s.jsx)("span",{className:"bg-red-500 text-gray-100 p-2 ",children:"No hay trabajo para mostrar por el momento..."})}),Object(s.jsx)(o.b,{className:"h-32  p-2 border-2 rounded-full shadow-lg border-gray-200",to:"/work/add",children:"Cargar Trabajo"})]}):Object(s.jsx)("div",{className:"works-grid p-1",children:g.length<=0?w.map((function(e){return Object(s.jsx)(ie,{work:e},e._id)})):g.map((function(e){return Object(s.jsx)(ie,{work:e},e._id)}))})]})},he=function(e){var t,n=e.work;return Object(s.jsxs)("div",{className:"p-1 bg-gray-200 hover:text-white hover:bg-gray-800 duration-900 shadow flex items-center justify-between border-b-2 border-gray-500",children:[Object(s.jsx)("p",{className:"text-green-500 flex-1 hover:text-green-400 hover:underline",children:Object(s.jsx)(o.b,{to:"/works/".concat(null===n||void 0===n?void 0:n._id),children:null===n||void 0===n?void 0:n.codigo})}),Object(s.jsx)("p",{className:"flex-1 p-2",children:(null===n||void 0===n?void 0:n.marca)+" - "+n.modelo}),Object(s.jsx)("p",{className:"flex-1 p-2 capitalize",children:null===n||void 0===n||null===(t=n.cliente)||void 0===t?void 0:t.name}),Object(s.jsx)("p",{className:"flex-1 p-2",children:"$ "+(null===n||void 0===n?void 0:n.precio)}),Object(s.jsx)("p",{className:"flex-1 p-2",children:A()(n.fechaInicio).format("DD-MM-YYYY")})]})},me=A()(new Date).format("YYYY-MM-DD"),xe=function(){var e=Object(c.useState)([]),t=Object(D.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(me),i=Object(D.a)(r,2),o=i[0],l=i[1],d=Object(c.useState)(me),b=Object(D.a)(d,2),m=b[0],x=b[1],O=Object(c.useState)([]),p=Object(D.a)(O,2),g=p[0],v=p[1],f=Object(c.useState)(!0),w=Object(D.a)(f,2),N=w[0],k=w[1];Object(c.useEffect)(Object(u.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("works/historialWork/all");case 2:return t=e.sent,e.next=5,t.json();case 5:(n=e.sent).ok&&a(n.works),k(!1);case 8:case"end":return e.stop()}}),e)}))),[]);Object(c.useEffect)((function(){v(n.filter((function(e){return A()(A()(e.fechaInicio).format("YYYY-MM-DD")).isSameOrAfter(o)&&A()(A()(e.fechaInicio).format("YYYY-MM-DD")).isSameOrBefore(m)})))}),[o,m]),console.log(o,m);var y=0,C=0;g.length>0&&g.map((function(e){C+=e.precio})),n&&n.length>0&&n.map((function(e){y+=e.precio}));return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"search  shadow rounded",children:[Object(s.jsx)("h1",{className:"text-4xl text-green-500 mb-1 p-1",children:"Filtrar"}),Object(s.jsxs)("div",{className:"flex mb-2 justify-between gap-1",children:[Object(s.jsxs)("div",{className:"flex-grow relative",children:[Object(s.jsx)("div",{className:"start-day capitalize text-green-400 text-2xl",children:"fecha Inicio"}),Object(s.jsxs)("div",{className:"relative",children:[Object(s.jsx)("input",{className:"text-gray-900 bg-gray-500 rounded-none cursor-pointer",type:"Date",value:o,onChange:function(e){l(e.target.value)}}),Object(s.jsx)("i",{onClick:function(e){l(me)},className:"fas fa-times flex h-full items-center justify-center top-0  cursor-pointer ml-1 p-2 text-white text-lg right-0 absolute"})]})]}),Object(s.jsxs)("div",{className:"flex-grow relative",children:[Object(s.jsx)("div",{className:"end-day capitalize text-green-400 text-2xl",children:"fecha Fin"}),Object(s.jsxs)("div",{className:"relative",children:[Object(s.jsx)("input",{className:"text-gray-900 bg-gray-500 rounded-none cursor-pointer",type:"Date",value:m,onChange:function(e){x(e.target.value)}}),Object(s.jsx)("i",{onClick:function(e){x(me)},className:"fas fa-times flex h-full items-center justify-center top-0  cursor-pointer ml-1 p-2 text-white text-lg right-0 absolute"})]})]})]})]}),N?Object(s.jsx)(Z,{}):g.length>0?Object(s.jsxs)("div",{children:[g.map((function(e){return Object(s.jsx)(he,{work:e},e._id)})),Object(s.jsxs)("div",{className:"flex justify-between p-2 bg-green-300 mt-1",children:[Object(s.jsx)("span",{children:"Precio Total "}),Object(s.jsxs)("span",{className:"text-lg pr-2 pl-1 text-white bg-gray-600 rounded-full",children:[" ","$ "+C]})]})]}):Object(s.jsxs)("div",{children:[n.map((function(e){return Object(s.jsx)(he,{work:e},e._id)})),Object(s.jsxs)("div",{className:"flex justify-between p-2 bg-green-300 mt-1",children:[Object(s.jsx)("span",{children:"Precio Total "}),Object(s.jsxs)("span",{children:[" ","$ "+y," "]})]})]})]})};function Oe(){return Object(s.jsxs)("div",{className:"taller",children:[Object(s.jsx)(ne,{}),Object(s.jsxs)("div",{className:"content-principal",children:[Object(s.jsx)(te,{}),Object(s.jsx)("div",{className:"content-principal-margin",children:Object(s.jsxs)(l.d,{children:[Object(s.jsx)(l.b,{exact:!0,path:"/",component:ee}),Object(s.jsx)(l.b,{exact:!0,path:"/works",component:be}),Object(s.jsx)(l.b,{exact:!0,path:"/clients",component:de}),Object(s.jsx)(l.b,{exact:!0,path:"/works/:workId/",component:ue}),Object(s.jsx)(l.b,{exact:!0,path:"/orders",component:ae}),Object(s.jsx)(l.b,{exact:!0,path:"/works/histories/all",component:xe}),Object(s.jsx)(l.b,{exact:!0,path:"/clients/:clientId",component:oe}),Object(s.jsx)(l.b,{exact:!0,path:"/client/add",component:re}),Object(s.jsx)(l.b,{exact:!0,path:"/work/add",component:je}),Object(s.jsx)(l.b,{exact:!0,path:"/auth/register",component:Y}),Object(s.jsx)(l.a,{to:"/"})]})})]})]})}var pe=n(78),ge=function(e){var t=e.isLogged,n=e.component,c=Object(pe.a)(e,["isLogged","component"]);return Object(s.jsx)(l.b,Object(_.a)(Object(_.a)({},c),{},{component:function(e){return t?Object(s.jsx)(n,Object(_.a)({},e)):Object(s.jsx)(l.a,{to:"/auth/login"})}}))},ve=function(e){var t=e.isLogged,n=e.component,c=Object(pe.a)(e,["isLogged","component"]);return Object(s.jsx)(l.b,Object(_.a)(Object(_.a)({},c),{},{component:function(e){return t?Object(s.jsx)(l.a,{to:"/"}):Object(s.jsx)(n,Object(_.a)({},e))}}))};function fe(){var e=Object(i.b)();Object(c.useEffect)((function(){e(function(){var e=Object(u.a)(j.a.mark((function e(t){var n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(),e.next=3,h("auth/renewJwt");case 3:return n=e.sent,e.next=6,n.json();case 6:(s=e.sent).ok?(localStorage.setItem("token",s.token),localStorage.setItem("token-start-date",(new Date).getTime()),t(f({uid:s.uid,username:s.username,role:s.role}))):t(v());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var t=Object(i.c)((function(e){return e.auth})),n=t.uid;return t.checking?Object(s.jsx)(M,{}):Object(s.jsx)(o.a,{children:Object(s.jsx)("div",{children:Object(s.jsxs)(l.d,{children:[Object(s.jsx)(ve,{isLogged:!!n,exact:!0,path:"/auth/login",component:T}),Object(s.jsx)(ge,{isLogged:!!n,path:"/",component:Oe}),Object(s.jsx)(l.a,{to:"/auth/login"})]})})})}var we=n(211),Ne={orders:[]},ke={clients:[],client:null,clientWorks:[],clientSearch:[]},ye={works:[],worksState:[],work:null},Ce=n(105),Se=Ce.createStore,Ee=Ce.compose,De=Ce.applyMiddleware,Ie=Se((0,Ce.combineReducers)({auth:n(494).authReducer,works:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.a.getAllWorks:return Object(_.a)(Object(_.a)({},e),{},{works:t.payload});case m.a.setOneWork:return Object(_.a)(Object(_.a)({},e),{},{work:t.payload});case m.a.filterWorksState:return Object(_.a)(Object(_.a)({},e),{},{worksState:t.payload.works});default:return e}},clients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.a.getAllClients:return Object(_.a)(Object(_.a)({},e),{},{clients:t.payload});case m.a.setOneClient:return Object(_.a)(Object(_.a)({},e),{},{client:t.payload});case m.a.setWorksClient:return Object(_.a)(Object(_.a)({},e),{},{clientWorks:t.payload});case m.a.resetWorksClient:return Object(_.a)(Object(_.a)({},e),{},{clientWorks:[]});case m.a.filtrarClient:return Object(_.a)(Object(_.a)({},e),{},{clientSearch:t.payload});default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.a.getAllOrders:return Object(_.a)(Object(_.a)({},e),{},{orders:t.payload});default:return e}}}),("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ee)(De(we.a))),_e=function(){return Object(s.jsx)(i.a,{store:Ie,children:Object(s.jsx)(fe,{})})};n(495);r.a.render(Object(s.jsx)(_e,{}),document.getElementById("root"))}},[[496,1,2]]]);
//# sourceMappingURL=main.d1024523.chunk.js.map